<html>
  <head>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="http://platinumos.tk/materialize.min.css">
    <link rel="stylesheet" href="http://platinumos.tk/bootstrap.min.css">
    <title>Platinum OS</title>
    <meta name="description" content="Online operating system community.">
    <meta name="keywords" content="platinum,os,operating,system,online,community">
    <meta property="og:image" content="https://i.imgur.com/pDYZybj.png">
    <meta name="theme-color" content="#d2d256">
    <link rel="icon" href="https://i.imgur.com/pDYZybj.png">
  </head>
  <body>
    <header>
      <nav>
        <div class="nav-wrapper accent-bg">
          <a class="brand-logo center">Users</a>
        </div>
      </nav>
    </header>
    
    <main>
      <div id="modal-new-user-fab" class="modal">
        <center>
          <div class="modal-content">
            <h4>Create new user</h4>
            <p>Create a new user.</p>
            <div class="container">
              <div class="row">
                <div class="col">
                  <div class="input-field">
                    <input id="username" type="text" class="validate" value="user">
                    <label for="username">Username (Cannot change later on!)</label>
                  </div>
                  <div class="input-field suffix a-bypass">
                    <input id="password" type="password" class="validate">
                    <label for="password">Password</label>
                    <a class="material-icons" id="password-eye" href="javascript:create_user_password_visibility();">visibility</a>
                  </div>
                  <div class="input-field">
                    <input id="picture" type="text" class="validate" value="https://i.imgur.com/XB5aKlS.png">
                    <label for="picture">Profile Picture (Image URL)</label>
                  </div>
                </div>
                <div class="col">
                  <div class="card" style="width:125px;">
                    <div class="card-image">
                      <img src="https://i.imgur.com/XB5aKlS.png" style="width:125px;height:125px;" id="picture-preview">
                    </div>
                    <div class="card-content" style="text-align:center;">
                      <span class="card-title" id="username-preview">user</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </center>
        <div class="modal-footer">
          <a class="waves-effect waves-light btn accent-bg">Create</a>
        </div>
      </div>
      
      <a class="btn-floating btn-large waves-effect waves-light accent-bg" id="new-user-fab" style="position:fixed;bottom:10px;left:10px;" href="javascript:create_new_user();"><i class="material-icons">add</i></a>
      <div class="tap-target accent-bg" id="tap-target-new-user-fab" data-target="new-user-fab">
        <div class="tap-target-content">
          <h5>Create a new user</h5>
          <p>Create a new user by pressing this button.</p>
        </div>
      </div>
      <br>
      <br>
      <br>
      <br>
      <center>
        <div class="container">
          <div class="row">
            <div class="col" id="user-list"></div>
          </div>
        </div>
      </center>
      
      <center>
        <div class="loading-screen">
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <h1>Loading...</h1>
          <br>
          <div class="progress" style="width:60%;">
            <div class="indeterminate"></div>
          </div>
        </div>
      </center>
    </main>
    
    <footer>
      
    </footer>
    
    <script src="http://platinumos.tk/jquery-3.5.1.js"></script>
    <script src="http://platinumos.tk/materialize.min.js"></script>
    <script>
      var accent_bg = "#d2d256";

      function update_theme(){
        document.querySelectorAll(".accent-bg").forEach(function(abg){
          abg.style.setProperty("background-color",accent_bg,"important");
        });
      }

      function create_user(){
        var instance = M.TapTarget.getInstance(document.getElementById("tap-target-new-user-fab"));
        instance.open();
      }
      
      function create_new_user(){
        var instance = M.Modal.getInstance(document.getElementById("modal-new-user-fab"));
        instance.open();
      }
      
      $(document).ready(function(){
        $('#tap-target-new-user-fab').tapTarget();
        $('#modal-new-user-fab').modal();
        
        document.getElementById("username").addEventListener("change", (event) => {
          document.getElementById("username-preview").innerHTML = event.target.value;
        });
        
        document.getElementById("picture").addEventListener("change", (event) => {
          document.getElementById("picture-preview").src = event.target.value;
        });
      });
      
      function create_user_password_visibility(){
        var eye = document.getElementById("password-eye");
        var input = document.getElementById("password");
        if (eye.innerHTML == "visibility"){
          input.type = "text";
          eye.innerHTML = "visibility_off";
        } else {
          input.type = "password";
          eye.innerHTML = "visibility";
        }
      }

      function generate_card(parent,title,picture,description,button,button_href,button2,button2_href){
        var card = document.createElement("DIV");
        card.classList.add("card");
        card.style = "width:175px;";
        parent.appendChild(card);

        var card_image = document.createElement("DIV");
        card_image.classList.add("card-image");
        card.appendChild(card_image);

        var img = document.createElement("IMG");
        img.src = picture;
        img.style = "width:175px;height:175px;";
        card_image.appendChild(img);

        var card_stacked = document.createElement("DIV");
        card_stacked.classList.add("card-stacked");
        card.appendChild(card_stacked);

        var card_content = document.createElement("DIV");
        card_content.classList.add("card-content");
        card_stacked.appendChild(card_content);

        var h5 = document.createElement("H5");
        h5.innerHTML = description;
        card_content.appendChild(h5);

        var card_action = document.createElement("DIV");
        card_action.classList.add("card-action");
        card_action.classList.add("white-fgcolor");
        card.appendChild(card_action);

        var a = document.createElement("A");
        a.classList.add("accent-bg")
        a.classList.add("waves-effect");
        a.classList.add("waves-light");
        a.classList.add("btn");
        a.href = button_href;
        a.innerHTML = button;
        card_action.appendChild(a);

        if (button2 && button2_href != null){
          var a2 = document.createElement("A");
          a2.classList.add("accent-bg");
          a2.classList.add("waves-effect");
          a2.classList.add("waves-light");
          a2.classList.add("btn");
          a2.href = button2_href;
          a2.innerHTML = button2;
          card_action.appendChild(a2);
        }

        update_theme();
      }

      function load_users(){
        if (localStorage.length > 0) {
          // Soon TM
        } else {
          generate_card(document.getElementById("user-list"),"New User","https://i.imgur.com/XB5aKlS.png","Create a new user","CREATE","javascript:create_user();",null,null);
        }
      }

      update_theme();
      load_users();
    </script>
  </body>
</html>
<style>
  body {
    background-image: url(https://i.imgur.com/0GqXjvZ.jpg);
    background-repeat: no-repeat;
    background-size: cover;
    background-position: center center;
  }
  
  .input-field.suffix a {
    position: absolute;
    width: 3rem;
    font-size: 2rem;
    transition: color .2s;
    top: 0px;
    right: 0px;
    color: black;
  }
  
  .input-field.suffix a:hover {
    color: black;
    text-decoration: none;
  }

  .input-field.suffix input,
  .input-field.suffix textarea {
    margin-right: 3rem;
    width: 92%;
    width: calc(100% - 3rem);
  }

  .input-field.suffix textarea {
    padding-top: .8rem;
  }

  .input-field.suffix label {
    margin-right: 3rem;
  }
  
  .loading-screen {
    opacity: 0.6;
    width: 100%;
    height: 100%;
    background-color: #d2d256;
    position: fixed;
    top: 0;
    left: 0;
  }
  
  .loading-screen h1 {
    color: white;
    opacity: 1;
  }
  
  .loading-screen .progress {
    opacity: 1;
  }
</style>
